<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Jayden Chan - Cheatsheets</title>
    <meta name="author" content="Jayden Chan" />
    <link rel="stylesheet" href="../font.css" />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="stylesheet" href="../fontawesome/css/fontawesome.min.css" />
    <link rel="stylesheet" href="../fontawesome/css/brands.min.css" />
    <link rel="stylesheet" href="../fontawesome/css/solid.min.css" />
  </head>

  <body>
    <div class="root">
      <div class="center-h">
        <div class="cheatcontainer">
          <h1>Dev Cheatsheets</h1>
          <div class="cheat">
      <h2>[Linux] Archive Dev folder</h2>
      <p>#dev, #compress, #archive, #tar, #xz, #fd</p>
      <pre># Select the files to be archived
fd . './Folder1' './Folder2' > files.txt

# Perform the compression (takes a long time)
compress dev-YYYY-MM-DD.tar.xz -T files.txt
</pre>
    </div>
              <div class="cheat">
      <h2>[Vim] Take a diff between splits</h2>
      <p>#vim, #diff, #splits</p>
      <pre>:windo diffthis</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Safely disconnect external drive</h2>
      <p>#hard drive, #safe, #unmount, #detach, #eject</p>
      <pre>udisksctl unmount -b /dev/sdxn
udisksctl power-off -b /dev/sdx
</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Rename a user</h2>
      <p>#linux, #user, #rename, #adduser, #usermod</p>
      <pre># Create a new temp account with sudo rights
sudo adduser temp
sudo adduser temp sudo

# Log out from your current account and back in with the temp account on a new TTY
# Rename user and home dir
sudo usermod -l new-username -m -d /home/new-username old-username

# Rename your username default's group:
sudo groupmod -n new-username old-username

# Log out from temp account and log back into your account with new-username.
# Remove temp account
sudo userdel -r temp
</pre>
    </div>
              <div class="cheat">
      <h2>[Vim] Paste contents of macro into command line</h2>
      <p>#vim, #macro</p>
      <pre>:ctrl-r ctrl-r <register></pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Pipe command output to clipboard</h2>
      <p>#linux, #clipboard, #pipe, #command</p>
      <pre>command | xclip -selection c</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Convert JPGs to PDF</h2>
      <p>#linux, #convert, #imagemagick</p>
      <pre>convert 1.jpg 2.jpg -rotate 90 -page Letter -quality 50 out.pdf</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Concatenate PDFs</h2>
      <p>#linux, #concat</p>
      <pre>pdftk one.pdf two.pdf cat output combined.pdf</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Show disk space usage for current folder</h2>
      <p>#linux, #disk, #storage</p>
      <pre>du -sch $(\ls -A) | sort -h</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Remap caps lock to escape</h2>
      <p>#linux, #keyboard, #xmodmap</p>
      <pre>xmodmap -e "clear lock"
xmodmap -e "keysym Caps_Lock = Escape"
</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Change key repeat rate and delay</h2>
      <p>#linux, #keyboard, #xset</p>
      <pre>xset r rate 270 35</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Setting up CUPS</h2>
      <p>#linux, #printing, #CUPS</p>
      <pre>yay -S cups
systemctl enable org.cups.cupsd.service
systemctl start org.cups.cupsd.service
sudo usermod -a -G sys jayden # Prevent forbidden errors
xdg-open http://localhost:631
</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Show GPU information</h2>
      <p>#linux, #sysinfo</p>
      <pre>lspci -vnn | rg VGA -A 12</pre>
    </div>
              <div class="cheat">
      <h2>[Vim] Retain all lines matching a pattern</h2>
      <p>#vim, #command, #regex</p>
      <pre>:v/pattern/d
</pre>
    </div>
              <div class="cheat">
      <h2>[Vim] Delete all lines matching pattern</h2>
      <p>#vim, #command, #regex</p>
      <pre>:g/pattern/d
</pre>
    </div>
              <div class="cheat">
      <h2>[Linux] Change the timezone</h2>
      <p>#oneliners, #linux, #timedatectl</p>
      <pre>timedatectl set-timezone Canada/Mountain</pre>
    </div>
              <div class="cheat">
      <h2>[Markdown] Image</h2>
      <p>#oneliners, #markdown, #image, #md</p>
      <pre>![Desc](img/image.png "Desc")</pre>
    </div>
              <div class="cheat">
      <h2>[JavaScript] Array with numbers 0..n</h2>
      <p>#oneliners, #javascript, #typescript, #js, #ts</p>
      <pre>[...Array(n).keys()].map(e => ...)</pre>
    </div>
              <div class="cheat">
      <h2>[Git] Show the total number of commits</h2>
      <p>#oneliners, #git</p>
      <pre>git rev-list --count --all</pre>
    </div>
              <div class="cheat">
      <h2>[JavaScript] Parse command line arguments & flags</h2>
      <p>#parse, #command, #arg, #get, #yarg</p>
      <pre>const args = process.argv.slice(2).filter((a) => !a.startsWith("--"));
const flags = Object.fromEntries(
  process.argv
    .filter((a) => a.startsWith("--"))
    .map((a) => {
      const [, flag, arg] = a.match(/--(\w+)=(.*)/) ?? [
        null,
        a.slice(2),
        true,
      ];
      return [flag, arg];
    })
);

/**
 * @param {string} param
 * @param {string} deflt
 * @returns {string}
 */
const getParam = (param, deflt) => flags[param] ?? deflt;
</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Check if variable is empty or unset</h2>
      <p>#shell, #variable</p>
      <pre>if [ -z "$variable" ]; then echo "blank"; else echo "not blank"; fi</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Glob pattern to array</h2>
      <p>#shell, #variable, #glob, #array</p>
      <pre>my_pngs=(./folder/**/*.png)</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Push to array</h2>
      <p>#shell, #variable, #push, #append</p>
      <pre>my_array+=( "$item" )</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Print path without extension/just file name</h2>
      <p>#shell, #print, #variable, #ext, #path</p>
      <pre>path="/path/to/the/file.txt"
echo ${path:h}
# /path/to/the
echo ${path:t}
# file.txt
echo ${path:r}
# /path/to/the/file
echo ${path:t:r}
# file
</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Check exit code of last command</h2>
      <p>#shell, #variable, #exit, #status, #result, #previous</p>
      <pre>[[ "$?" = "0" ]] && echo "Ok" || echo "fail"</pre>
    </div>
              <div class="cheat">
      <h2>[Shell] Iterate arguments</h2>
      <p>#shell, #arguments, #args</p>
      <pre>while test $# -gt 0
do
    case "$1" in
        --flag) echo "flag"
            ;;
        *) echo "parameter"
            ;;
    esac
    shift
done
</pre>
    </div>
              <div class="cheat">
      <h2>[ImageMagick] Crop</h2>
      <p>#imagemagick, #convert, #cut</p>
      <pre>convert image.png -crop <size_x>x<size_y>+<position_x>+<position_y> out.png
</pre>
    </div>
              <div class="cheat">
      <h2>[ImageMagick] Scale</h2>
      <p>#imagemagick, #convert, #resize</p>
      <pre>convert image.png -resize 200% out.png
</pre>
    </div>
              <div class="cheat">
      <h2>[ImageMagick] Retain pixels over a certain brightness threshold</h2>
      <p>#imagemagick, #convert, #pixel</p>
      <pre>convert image.png -threshold 80% out.png
</pre>
    </div>
              <div class="cheat">
      <h2>[ImageMagick] Invert</h2>
      <p>#imagemagick, #convert, #negate</p>
      <pre>convert image.png -negate out.png
</pre>
    </div>
              <div class="cheat">
      <h2>[JavaScript] Regex one-liner</h2>
      <p>#regex, #javascript, #js, #typescript, #ts</p>
      <pre>const [match, group1, group2, group3] = myString.match(/regex/) ?? [];
</pre>
    </div>
              <div class="cheat">
      <h2>[JavaScript] Get all regex matches</h2>
      <p>#regex, #javascript, #js, #typescript, #ts</p>
      <pre>const regex = /the_regex/g;

let m;

do {
  m = regex.exec(str);
  if (m) {
    ...
  }
} while (m !== null);
</pre>
    </div>
              <div class="cheat">
      <h2>[Rust] Connect to a postgres db with SSL and an r2d2 connection pool</h2>
      <p>#SETTMMTOHTS, #rust, #postgres</p>
      <pre>use openssl::ssl::{SslConnector, SslMethod};
use postgres_openssl::MakeTlsConnector;
use r2d2_postgres::PostgresConnectionManager;
use std::thread;

fn main() {
    let mut builder = SslConnector::builder(SslMethod::tls()).unwrap();
    builder.set_verify(openssl::ssl::SslVerifyMode::NONE);
    let connector = MakeTlsConnector::new(builder.build());

    let manager = PostgresConnectionManager::new(
        "DATABASE_URL".parse().unwrap(),
        connector,
    );
    let pool = r2d2::Pool::new(manager).unwrap();

    let pool = pool.clone();
    let join_handler = thread::spawn(move || {
        println!("doing the stuff");
        let mut client = pool.get().unwrap();
        let results = client.query("SELECT * FROM test_data", &[]).unwrap();

        println!("{:#?}", results[0].get::<usize, String>(0));
    });

    println!("waiting");
    join_handler.join().unwrap();
    println!("done");
}
</pre>
    </div>
        </div>
      </div>
    </div>
  </body>
</html>
